(this["webpackJsonptodo-list"]=this["webpackJsonptodo-list"]||[]).push([[0],{27:function(e,t,n){e.exports=n(44)},32:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(21),r=n.n(c),l=(n(32),n(7)),i=n(8),u=n(3),s=n(22),m=n.n(s),d=(n(35),n(36),m.a.initializeApp({apiKey:"AIzaSyD2VKw7XF3b2vRFzhUXBLCrQ8HInxwv1Ww",authDomain:"todo-hooks-53a9a.firebaseapp.com",databaseURL:"https://todo-hooks-53a9a.firebaseio.com",projectId:"todo-hooks-53a9a",storageBucket:"todo-hooks-53a9a.appspot.com",messagingSenderId:"646656220454",appId:"1:646656220454:web:cae34273193cd37b5875e7",measurementId:"G-8NJGJ76DFD"})),p=d.firestore(),f=d.auth(),E=Object(a.createContext)(),g=function(e){var t=Object(a.useState)(null),n=Object(u.a)(t,2),c=n[0],r=n[1];Object(a.useEffect)((function(){f.onAuthStateChanged((function(e){r(e||null)}))}),[]);return o.a.createElement(E.Provider,{value:{currentUser:c,login:function(e,t){f.signInWithEmailAndPassword(e,t).catch((function(e){return console.log("login failed",e)}))},logout:function(){f.signOut()},signup:function(e,t,n){f.createUserWithEmailAndPassword(t,n).then((function(t){t.user.updateProfile({displayName:e})})).catch((function(e){return console.log("singnup failed",e)}))}}},e.children)},b=n(26),v=Object(a.createContext)(),h=function(e){var t=Object(a.useContext)(E).currentUser,n=Object(a.useState)([]),c=Object(u.a)(n,2),r=c[0],l=c[1];Object(a.useEffect)((function(){if(t){var e=t.uid;return p.collectionGroup("todos").where("user","==",e).orderBy("timeStamp").onSnapshot((function(e){var t=[];e.forEach((function(e){var n=e.data(),a=n.content,o=n.isCompleted,c=n.isEditing,r=n.timeStamp;t.push({id:e.id,content:a,isCompleted:o,isEditing:c,timeStamp:r})})),l(t)}))}}),[t]);return o.a.createElement(v.Provider,{value:{todos:r,addTodo:function(e,t){p.collection("todos").add({content:e,isCompleted:!1,isEditing:!1,timeStamp:Date.now(),user:t})},deleteTodo:function(e){p.collection("todos").doc(e).delete()},toggleTodoStatus:function(e){var t=r.find((function(t){return t.id===e})),n=t.isCompleted=!t.isCompleted;p.collection("todos").doc(e).update({isCompleted:n})},toggleEdit:function(e){var t=r.find((function(t){return t.id===e}));l(Object(b.a)(r),t.isEditing=!t.isEditing)},editTodo:function(e,t){p.collection("todos").doc(t).update({content:e,isEditing:!1})}}},e.children)},C=n(11),j=n(12),O=function(){var e=Object(a.useContext)(E),t=e.currentUser,n=e.logout,c=Object(a.useContext)(v).todos;return o.a.createElement("nav",null,o.a.createElement("h1",null,"Todo-app with React Hooks"),t?o.a.createElement("div",null,o.a.createElement("ul",null,o.a.createElement("li",{onClick:function(){return n()}},o.a.createElement(l.b,{to:"/"},o.a.createElement(C.a,{icon:j.b,className:"log-out",title:"log out"})))),o.a.createElement("p",{className:"info-bar"},"Hi, ",t.displayName," you have ",c.length," tasks on your list")):null)},S=function(){var e=Object(a.useContext)(E),t=e.login,n=e.currentUser,c=Object(a.useState)(""),r=Object(u.a)(c,2),s=r[0],m=r[1],d=Object(a.useState)(""),p=Object(u.a)(d,2),f=p[0],g=p[1];return n?o.a.createElement(i.a,{to:"/"}):o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,"Sign in"),o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(s,f)}},o.a.createElement("input",{type:"text",value:s,autoComplete:"username",placeholder:"email",onChange:function(e){return m(e.target.value)}}),o.a.createElement("input",{type:"password",autoComplete:"current-password",value:f,placeholder:"password",onChange:function(e){return g(e.target.value)}}),o.a.createElement("input",{type:"submit",value:"Login"})),o.a.createElement("p",{className:"notification-bar"},"Don't have an account? ",o.a.createElement(l.b,{to:"signup"},"Sign up")))},w=n(25),x=function(e){var t=e.id,n=e.prevContent,c=Object(a.useContext)(v).editTodo,r=Object(a.useState)(n),l=Object(u.a)(r,2),i=l[0],s=l[1],m=function(e){e.preventDefault(),""!==i.trim()&&(c(i,t),s(""))};return o.a.createElement("form",{className:"edit-form",onSubmit:m,onBlur:m},o.a.createElement("input",{className:"edit-input",type:"text",value:i,onChange:function(e){return s(e.target.value)}}))},y=function(e){var t=e.todo,n=Object(a.useContext)(v),c=n.deleteTodo,r=n.toggleTodoStatus,l=n.toggleEdit;return o.a.createElement("li",null,o.a.createElement("span",{className:"check-box",onClick:function(){return r(t.id)}},t.isCompleted&&o.a.createElement(C.a,{icon:j.a,className:"icon"})),o.a.createElement("span",{className:"content ".concat(t.isCompleted&&"content-completed"),onDoubleClick:function(){return l(t.id)}},t.isEditing?o.a.createElement(x,{id:t.id,prevContent:t.content}):o.a.createElement("p",{className:"task-content"},t.content)),o.a.createElement("span",{className:"delete-box",onClick:function(){return c(t.id)}},t.isCompleted&&o.a.createElement(C.a,{icon:w.a,className:"icon"})))},k=function(){var e=Object(a.useContext)(E).currentUser,t=Object(a.useContext)(v).addTodo,n=Object(a.useState)(""),c=Object(u.a)(n,2),r=c[0],l=c[1];return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:function(n){n.preventDefault(),""!==r.trim()&&(t(r,e.uid),l(""))}},o.a.createElement("input",{type:"text",placeholder:"todo",value:r,onChange:function(e){return l(e.target.value)}}),o.a.createElement("input",{type:"submit",value:"Add todo"})))},N=function(){var e=Object(a.useContext)(E).currentUser,t=Object(a.useContext)(v).todos;return e?o.a.createElement(o.a.Fragment,null,o.a.createElement(k,null),t.length?o.a.createElement("div",null,o.a.createElement("p",{className:"tip"},"double click on todo to edit"),o.a.createElement("ul",{className:"todo-list"},t.map((function(e){return o.a.createElement(y,{todo:e,key:e.id})})))):o.a.createElement("p",{className:"notification-bar"},"no more todos, yay!")):o.a.createElement(S,null)},D=function(){var e=Object(a.useContext)(E),t=e.signup,n=e.currentUser,c=Object(a.useState)(""),r=Object(u.a)(c,2),l=r[0],s=r[1],m=Object(a.useState)(""),d=Object(u.a)(m,2),p=d[0],f=d[1],g=Object(a.useState)(""),b=Object(u.a)(g,2),v=b[0],h=b[1];return n?o.a.createElement(i.a,{to:"/"}):o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,"Sign up"),o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(v,l,p)}},o.a.createElement("input",{type:"text",value:v,placeholder:"name",onChange:function(e){return h(e.target.value)}}),o.a.createElement("input",{type:"text",value:l,autoComplete:"username",placeholder:"email",onChange:function(e){return s(e.target.value)}}),o.a.createElement("input",{type:"password",autoComplete:"current-password",value:p,placeholder:"password",onChange:function(e){return f(e.target.value)}}),o.a.createElement("input",{type:"submit",value:"Sign up"})))};var U=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(l.a,null,o.a.createElement(g,null,o.a.createElement(h,null,o.a.createElement(O,null),o.a.createElement(i.d,null,o.a.createElement(i.b,{exact:!0,path:"/",component:N}),o.a.createElement(i.b,{path:"/signup",component:D}),o.a.createElement(i.b,{path:"/login",component:S}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[27,1,2]]]);
//# sourceMappingURL=main.bd92e1fe.chunk.js.map